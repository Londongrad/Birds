<UserControl
    x:Class="Birds.UI.Views.UserControls.BirdsView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dto="clr-namespace:Birds.Application.DTOs;assembly=Birds.Application"
    xmlns:local="clr-namespace:Birds.UI.Views.UserControls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:Birds.UI.ViewModels"
    d:DataContext="{d:DesignInstance Type=vm:BirdListViewModel}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">

    <Border Style="{StaticResource ViewsBorder}">
        <Grid>
            <!-- Main content -->
        <DockPanel>

                <!-- Filter and search panel -->
            <StackPanel
                Margin="0,0,0,10"
                DockPanel.Dock="Top"
                Orientation="Horizontal">

                <TextBox
                    Width="150"
                    Height="35"
                    Margin="0,0,10,0"
                    Style="{StaticResource TextBoxAdd}"
                    Text="{Binding SearchText,
                                   UpdateSourceTrigger=PropertyChanged}" />

                <TextBlock
                    DockPanel.Dock="Top"
                    FontSize="24"
                    Text="{Binding BirdsView.Count,
                                   StringFormat=Всего птиц: {0},
                                   Mode=OneWay}" />

                <ComboBox
                    DisplayMemberPath="Display"
                    ItemsSource="{Binding Filters}"
                    SelectedItem="{Binding SelectedFilter,
                                           Mode=OneWayToSource}"
                    Style="{StaticResource FilterComboBoxStyle}" />
            </StackPanel>

                <!-- List of birds -->
            <ListBox ItemsSource="{Binding BirdsView}">

                <ListBox.ItemTemplate>
                    <DataTemplate DataType="{x:Type dto:BirdDTO}">
                        <!-- создаём BirdViewModel через конвертер -->
                        <local:BirdItemControl DataContext="{Binding Converter={StaticResource BirdVmConverter}}" />
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </DockPanel>
    </Border>
</UserControl>